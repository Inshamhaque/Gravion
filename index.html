<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Enhanced Gravity Simulator</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
background:radial-gradient(circle at 20% 50%, #0a0a2e, #16213e, #000);
height:100vh;
overflow:hidden;
font:16px system-ui,sans-serif;
color:#fff;
position:relative
}

/* Animated star field background */
.stars {
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
overflow: hidden;
z-index: 0;
}

.star {
position: absolute;
background: white;
border-radius: 50%;
animation: twinkle 2s infinite alternate;
}

@keyframes twinkle {
0% { opacity: 0.3; transform: scale(0.8); }
100% { opacity: 1; transform: scale(1.2); }
}

.lab{
position:relative;
width:100vw;
height:100vh;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
z-index: 1;
}

.header{
position:absolute;
top:20px;
left:50%;
transform:translateX(-50%);
text-align:center;
z-index:10;
background: rgba(0,0,0,0.3);
backdrop-filter: blur(10px);
padding: 15px 25px;
border-radius: 15px;
border: 1px solid rgba(255,255,255,0.1);
}

.title{
font-size:32px;
font-weight:bold;
margin-bottom:8px;
text-shadow:0 2px 8px rgba(0,0,0,0.7);
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}

.subtitle{
font-size:14px;
opacity:0.9;
font-weight:300
}

.controls{
position:absolute;
top:20px;
right:20px;
z-index:10;
display:flex;
flex-direction:column;
gap:12px
}

.btn{
background:rgba(255,255,255,0.15);
backdrop-filter:blur(10px);
border:2px solid rgba(255,255,255,0.2);
padding:12px 18px;
border-radius:25px;
cursor:pointer;
font-weight:600;
font-size:12px;
letter-spacing:0.5px;
transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
color:#fff;
text-align:center;
min-width:100px;
position: relative;
overflow: hidden;
}

.btn:hover{
background:rgba(255,255,255,0.25);
transform:translateY(-2px);
box-shadow:0 6px 20px rgba(0,0,0,0.3);
}

.btn::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
transition: left 0.5s;
}

.btn:hover::before {
left: 100%;
}

input[type="checkbox"]{display:none}

#clear:checked + .clear-btn{
background:rgba(255,59,48,0.9);
border-color:rgba(255,59,48,1);
transform: scale(0.95);
}

.clear-btn::after{content:"üóë Clear"}

#pause:checked + .pause-btn{
background:rgba(255,204,0,0.9);
border-color:rgba(255,204,0,1);
transform: scale(0.95);
}

.pause-btn::after{content:"‚è∏ Pause"}
.pause-btn:not(.paused)::after{content:"‚è∏ Pause"}

#gravity:checked + .gravity-btn{
background:rgba(76,175,80,0.9);
border-color:rgba(76,175,80,1);
}

.gravity-btn::after{content:"üåç Gravity: ON"}
#gravity:not(:checked) + .gravity-btn::after{content:"üåç Gravity: OFF"}

.space{
position:relative;
width:90vw;
height:75vh;
max-width:1000px;
max-height:650px;
background:radial-gradient(circle at center,rgba(20,20,80,0.4),rgba(5,5,30,0.9));
backdrop-filter:blur(8px);
border-radius:20px;
border:2px solid rgba(255,255,255,0.15);
overflow:hidden;
box-shadow:0 12px 40px rgba(0,0,0,0.5);
cursor:crosshair;
position: relative;
}

.space::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
bottom: 0;
background: 
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 40% 70%, rgba(255,255,255,0.2), transparent),
        radial-gradient(1px 1px at 90% 40%, rgba(255,255,255,0.3), transparent),
        radial-gradient(2px 2px at 60% 10%, rgba(255,255,255,0.2), transparent);
    background-size: 200px 200px, 100px 100px, 150px 150px, 120px 120px;
    animation: stars-move 20s linear infinite;
    pointer-events: none;
}

@keyframes stars-move {
    0% { transform: translateX(0) translateY(0); }
    100% { transform: translateX(-100px) translateY(-100px); }
}

.planet{
position:absolute;
border-radius:50%;
transform:translate(-50%,-50%);
box-shadow:0 0 25px currentColor, inset -3px -3px 8px rgba(0,0,0,0.3);
animation:orbit 8s linear infinite;
z-index:3;
cursor: pointer;
transition: all 0.3s ease;
}

.planet:hover {
transform: translate(-50%,-50%) scale(1.2);
box-shadow: 0 0 35px currentColor, inset -3px -3px 8px rgba(0,0,0,0.3);
}

.planet-small{
width:14px;
height:14px;
background:radial-gradient(circle at 35% 25%,#4ecdc4,#26a0a7,#1a5d5d);
color:#4ecdc4;
animation-duration:3s;
}

.planet-medium{
width:20px;
height:20px;
background:radial-gradient(circle at 35% 25%,#ff6b6b,#e74c3c,#8b2635);
color:#ff6b6b;
animation-duration:5s;
}

.planet-large{
width:26px;
height:26px;
background:radial-gradient(circle at 35% 25%,#feca57,#f39c12,#b8860b);
color:#feca57;
animation-duration:7s;
}

.sun{
position:absolute;
top:50%;
left:50%;
width:50px;
height:50px;
background:radial-gradient(circle at 35% 25%, #fff, #ffeb3b, #ff9800);
border-radius:50%;
transform:translate(-50%,-50%);
box-shadow:0 0 40px #ffeb3b,0 0 80px rgba(255,235,59,0.6), 0 0 120px rgba(255,152,0,0.3);
animation:sun-pulse 4s ease-in-out infinite;
z-index:4;
cursor: pointer;
}

.sun:hover {
transform: translate(-50%,-50%) scale(1.1);
box-shadow:0 0 50px #ffeb3b,0 0 100px rgba(255,235,59,0.8), 0 0 150px rgba(255,152,0,0.5);
}

.orbit-path{
position:absolute;
top:50%;
left:50%;
border:1px solid rgba(255,255,255,0.08);
border-radius:50%;
transform:translate(-50%,-50%);
pointer-events:none;
z-index:1;
animation: orbit-glow 8s ease-in-out infinite alternate;
}

@keyframes orbit-glow {
0% { border-color: rgba(255,255,255,0.05); }
100% { border-color: rgba(255,255,255,0.15); }
}

.orbit-1{width:130px;height:130px}
.orbit-2{width:220px;height:220px}
.orbit-3{width:310px;height:310px}
.orbit-4{width:400px;height:400px}
.orbit-5{width:490px;height:490px}

.trail{
position:absolute;
width:3px;
height:3px;
background:radial-gradient(circle, currentColor, transparent);
border-radius:50%;
opacity:0.8;
animation:trail-fade 3s ease-out forwards;
pointer-events:none;
z-index: 2;
}

#pause:checked ~ .space .planet,
#pause:checked ~ .space .sun{
animation-play-state:paused !important;
}

#clear:checked ~ .space .planet,
#clear:checked ~ .space .trail{
display:none;
}

.comet{
background:radial-gradient(circle at 35% 25%,#fff,#48cae4,#0077be) !important;
color:#48cae4 !important;
animation-duration:2.5s !important;
animation-timing-function:ease-in-out !important;
}

.comet::after{
content:'';
position:absolute;
top:50%;
right:100%;
width:40px;
height:3px;
background:linear-gradient(90deg,transparent,currentColor 30%, transparent);
border-radius:2px;
transform:translateY(-50%);
opacity:0.8;
}

.asteroid{
background:radial-gradient(circle at 35% 25%,#95a5a6,#34495e,#2c3e50) !important;
color:#95a5a6 !important;
animation-duration:4.5s !important;
width:10px !important;
height:10px !important;
}

.moon {
background: radial-gradient(circle at 35% 25%, #ddd, #bbb, #999) !important;
color: #ddd !important;
width: 6px !important;
height: 6px !important;
animation-duration: 1s !important;
}

.instructions{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
text-align:center;
background:rgba(0,0,0,0.7);
backdrop-filter:blur(20px);
padding:15px 25px;
border-radius:15px;
border:1px solid rgba(255,255,255,0.2);
max-width: 90%;
}

.physics-info{
position:absolute;
top:20px;
left:20px;
background:rgba(0,0,0,0.7);
backdrop-filter:blur(15px);
padding:12px 16px;
border-radius:12px;
border:1px solid rgba(255,255,255,0.2);
font-size:12px;
line-height:1.5;
}

.stats {
position: absolute;
bottom: 20px;
right: 20px;
background: rgba(0,0,0,0.7);
backdrop-filter: blur(15px);
padding: 12px 16px;
border-radius: 12px;
border: 1px solid rgba(255,255,255,0.2);
font-size: 11px;
line-height: 1.4;
}

@keyframes orbit{
0%{transform:translate(-50%,-50%) rotate(0deg) translateX(var(--radius)) rotate(0deg)}
100%{transform:translate(-50%,-50%) rotate(360deg) translateX(var(--radius)) rotate(-360deg)}
}

@keyframes sun-pulse{
0%,100%{transform:translate(-50%,-50%) scale(1)}
50%{transform:translate(-50%,-50%) scale(1.15)}
}

@keyframes trail-fade{
0%{opacity:0.9;transform:scale(1.2)}
100%{opacity:0;transform:scale(0.2)}
}

@keyframes gravitational-wave {
0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
}

.gravity-wave {
position: absolute;
border: 2px solid rgba(255, 255, 255, 0.3);
border-radius: 50%;
animation: gravitational-wave 2s ease-out;
pointer-events: none;
z-index: 1;
}

/* Responsive design */
@media (max-width:768px){
.space{width:95vw;height:65vh}
.title{font-size:28px}
.controls{right:15px;top:15px;gap:8px}
.btn{padding:10px 14px;font-size:11px;min-width:85px}
.sun{width:40px;height:40px}
.orbit-1{width:110px;height:110px}
.orbit-2{width:180px;height:180px}
.orbit-3{width:250px;height:250px}
.orbit-4{width:320px;height:320px}
.orbit-5{width:390px;height:390px}
.header{padding:12px 20px}
.physics-info, .stats {font-size:10px;padding:10px 12px}
}

/* Dark mode enhancements */
@media (prefers-color-scheme: dark) {
body {
    background: radial-gradient(circle at 20% 50%, #1a1a3e, #2d1b69, #000);
}
}
</style>
</head>
<body>
<div class="stars" id="stars"></div>

<div class="lab">
<div class="header">
<div class="title">Gravity Simulator</div>
<div class="subtitle">Click to add celestial bodies ‚Ä¢ Experience realistic orbital mechanics</div>
</div>

<div class="controls">
<input type="checkbox" id="clear">
<label for="clear" class="btn clear-btn"></label>
<input type="checkbox" id="pause">
<label for="pause" class="btn pause-btn"></label>
<input type="checkbox" id="gravity" checked>
<label for="gravity" class="btn gravity-btn"></label>
</div>

<div class="physics-info">
<strong>Orbital Mechanics:</strong><br>
F = GMm/r¬≤<br>
v = ‚àö(GM/r)<br>
T = 2œÄ‚àö(r¬≥/GM)<br>
<small>Kepler's Laws Active</small>
</div>

<div class="stats" id="stats">
<strong>System Status:</strong><br>
Bodies: <span id="body-count">0</span><br>
Total Mass: <span id="total-mass">1.0</span>M‚òâ<br>
Avg. Orbital Speed: <span id="avg-speed">0</span> km/s
</div>

<div class="space" id="space">
<div class="orbit-path orbit-1"></div>
<div class="orbit-path orbit-2"></div>
<div class="orbit-path orbit-3"></div>
<div class="orbit-path orbit-4"></div>
<div class="orbit-path orbit-5"></div>
<div class="sun" title="Sol - G2V Main Sequence Star"></div>
</div>

<div class="instructions">
<strong>üåå Interactive Gravity Simulator</strong><br>
<strong>Left Click:</strong> Add planets ‚Ä¢ <strong>Right Click:</strong> Add moons ‚Ä¢ <strong>Shift+Click:</strong> Add comets/asteroids
</div>
</div>

<script>
const space = document.getElementById('space');
const bodyCountEl = document.getElementById('body-count');
const totalMassEl = document.getElementById('total-mass');
const avgSpeedEl = document.getElementById('avg-speed');

let planetCount = 0;
let totalSystemMass = 1.0; // Sun's mass
let celestialBodies = [];

// Create animated star field
function createStarField() {
const starsContainer = document.getElementById('stars');
for (let i = 0; i < 150; i++) {
const star = document.createElement('div');
star.className = 'star';
star.style.left = Math.random() * 100 + '%';
star.style.top = Math.random() * 100 + '%';
star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
star.style.animationDelay = Math.random() * 2 + 's';
star.style.animationDuration = (Math.random() * 3 + 2) + 's';
starsContainer.appendChild(star);
}
}

// Planet classification based on distance and physics
function getPlanetType(distance, isSpecial = false) {
if (isSpecial) {
return Math.random() > 0.5 ? 'comet' : 'asteroid';
}
if (distance < 90) return 'planet-small';
if (distance < 180) return 'planet-medium';
if (distance < 300) return 'planet-large';
return Math.random() > 0.3 ? 'comet' : 'asteroid';
}

// Calculate orbital velocity based on distance (Kepler's laws)
function getOrbitalPeriod(distance) {
// Simplified: T ‚àù r^1.5 (Kepler's third law)
const basePeriod = 3; // seconds for closest orbit
return basePeriod * Math.pow(distance / 65, 1.5);
}

// Create gravitational wave effect
function createGravityWave(x, y) {
if (!document.getElementById('gravity').checked) return;

const wave = document.createElement('div');
wave.className = 'gravity-wave';
wave.style.left = x + 'px';
wave.style.top = y + 'px';
wave.style.width = '10px';
wave.style.height = '10px';
space.appendChild(wave);

setTimeout(() => wave.remove(), 2000);
}

// Enhanced click handler with multiple interaction modes
function handleSpaceClick(e) {
const rect = space.getBoundingClientRect();
const centerX = rect.width / 2;
const centerY = rect.height / 2;
const clickX = e.clientX - rect.left;
const clickY = e.clientY - rect.top;

// Calculate distance from center (sun)
const distance = Math.sqrt((clickX - centerX) ** 2 + (clickY - centerY) ** 2);

// Don't create bodies too close to sun
if (distance < 35) return;

// Create gravity wave effect
createGravityWave(clickX, clickY);

// Determine body type based on interaction
let bodyType, bodySize, bodyMass;
if (e.shiftKey) {
// Shift+Click for special bodies
bodyType = Math.random() > 0.5 ? 'comet' : 'asteroid';
bodySize = bodyType === 'comet' ? 'planet-small' : 'asteroid';
bodyMass = bodyType === 'comet' ? 0.1 : 0.05;
} else if (e.button === 2) {
// Right click for moons (smaller, faster)
bodyType = 'moon';
bodySize = 'moon';
bodyMass = 0.02;
} else {
// Left click for regular planets
bodyType = getPlanetType(distance);
bodySize = bodyType;
bodyMass = bodyType === 'planet-large' ? 0.5 : 
              bodyType === 'planet-medium' ? 0.3 : 0.1;
}

// Create celestial body
const body = document.createElement('div');
body.className = `planet ${bodySize} ${bodyType}`;
body.style.left = '50%';
body.style.top = '50%';
body.style.setProperty('--radius', distance + 'px');

// Calculate realistic orbital period
const orbitalPeriod = getOrbitalPeriod(distance);
body.style.animationDuration = orbitalPeriod + 's';

// Random starting position on orbit
const startAngle = Math.random() * 360;
body.style.animationDelay = -(startAngle / 360 * orbitalPeriod) + 's';

// Add tooltip with orbital data
const orbitalSpeed = Math.round(30 / Math.sqrt(distance / 65)); // Approximate km/s
body.title = `Distance: ${Math.round(distance)}px | Period: ${orbitalPeriod.toFixed(1)}s | Speed: ${orbitalSpeed}km/s`;

space.appendChild(body);

// Store body data
celestialBodies.push({
element: body,
distance: distance,
mass: bodyMass,
period: orbitalPeriod,
type: bodyType
});

// Enhanced trail system
const createTrail = () => {
if (body.parentNode && !document.getElementById('clear').checked && 
    !document.getElementById('pause').checked) {
const trail = document.createElement('div');
trail.className = 'trail';
trail.style.color = window.getComputedStyle(body).color;

// Get current body position
const bodyRect = body.getBoundingClientRect();
const spaceRect = space.getBoundingClientRect();
trail.style.left = (bodyRect.left - spaceRect.left + bodyRect.width/2) + 'px';
trail.style.top = (bodyRect.top - spaceRect.top + bodyRect.height/2) + 'px';

space.appendChild(trail);

// Remove trail after animation
setTimeout(() => trail.remove(), 3000);

// Schedule next trail with variable timing
const trailInterval = bodyType === 'comet' ? 100 : 
                     bodyType === 'moon' ? 150 : 200;
setTimeout(createTrail, trailInterval);
}
};

// Start creating trails
setTimeout(createTrail, 500);

planetCount++;
totalSystemMass += bodyMass;
updateStats();
}

// Update system statistics
function updateStats() {
bodyCountEl.textContent = planetCount;
totalMassEl.textContent = totalSystemMass.toFixed(2);

// Calculate average orbital speed
if (celestialBodies.length > 0) {
const avgSpeed = celestialBodies.reduce((sum, body) => 
sum + (30 / Math.sqrt(body.distance / 65)), 0) / celestialBodies.length;
avgSpeedEl.textContent = Math.round(avgSpeed);
} else {
avgSpeedEl.textContent = '0';
}
}

// Event listeners
space.addEventListener('click', handleSpaceClick);
space.addEventListener('contextmenu', (e) => {
e.preventDefault();
handleSpaceClick(e);
});

// Clear functionality
document.getElementById('clear').addEventListener('change', function(e) {
if (e.target.checked) {
const planets = space.querySelectorAll('.planet');
const trails = space.querySelectorAll('.trail');
planets.forEach(planet => planet.remove());
trails.forEach(trail => trail.remove());
celestialBodies = [];
planetCount = 0;
totalSystemMass = 1.0;
updateStats();

setTimeout(() => {
e.target.checked = false;
}, 500);
}
});

// Gravity toggle (affects visual feedback)
document.getElementById('gravity').addEventListener('change', function(e) {
const orbits = space.querySelectorAll('.orbit-path');
if (e.target.checked) {
orbits.forEach(orbit => orbit.style.display = 'block');
} else {
orbits.forEach(orbit => orbit.style.display = 'none');
}
});

// Initialize
createStarField();
updateStats();

// Add keyboard shortcuts
document.addEventListener('keydown', function(e) {
switch(e.key) {
case 'c':
case 'C':
document.getElementById('clear').click();
break;
case ' ':
e.preventDefault();
document.getElementById('pause').click();
break;
case 'g':
case 'G':
document.getElementById('gravity').click();
break;
}
});
</script>
</body>
</html>